---
layout: default
---

{% assign collection_name = page.collection | default: page.collection_name %}
{% assign index_sort_key = page.collection_sort_key | default: 'order' %}
{% if page.collection_path %}
  {% if page.collection_name %}
    {% assign base = site[page.collection_name] %}
  {% elsif page.lang == "en" %}
    {% assign base = site.posts_en %}
  {% else %}
    {% assign base = site.posts %}
  {% endif %}
  {% assign collection_entries = base | where_exp: 'p', 'p.path contains page.collection_path' | sort: index_sort_key %}
{% else %}
  {% assign collection_entries = site[collection_name] | sort: index_sort_key %}
{% endif %}
{% if page.collection_label %}
  {% assign collection_label = page.collection_label %}
{% else %}
  {% assign collection_label = collection_name | replace: '_', ' ' | capitalize %}
{% endif %}

<section class="guide-index">
  <header class="guide-index-header">
    <h1>{{ page.title | default: collection_label }}</h1>
    {% if page.description %}
    <p class="guide-index-description">{{ page.description }}</p>
    {% endif %}
  </header>

  <ol class="guide-index-list">
    {% for entry in collection_entries %}
    <li class="guide-index-item">
      <div class="guide-index-item-body">
        <span class="guide-index-order">{{ forloop.index }}.</span>
        <div class="guide-index-text">
          <a class="guide-index-title" href="{{ entry.url | relative_url }}">{{ entry.title }}</a>
          {% if entry.subtitle %}
          <p class="guide-index-subtitle">{{ entry.subtitle }}</p>
          {% endif %}
          {% if entry.description %}
          <p class="guide-index-summary">{{ entry.description }}</p>
          {% endif %}
        </div>
      </div>
    </li>
    {% endfor %}
  </ol>
</section>
